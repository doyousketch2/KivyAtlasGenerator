<FileScreen>:
  label:  label

  BoxLayout:
    orientation:  'vertical'

    FileChooserIconView:  ##  top region
      path: './data'
      filters: ['*.png']
      canvas.before:
        Color:
          rgb:  .4, .5, .5
        Rectangle:
          pos:  self.pos
          size:  self.size
      on_selection:  root.select(*args)

      BoxLayout:  ##  bottom region
        orientation:  'horizontal'
        size_hint_y:  .06

        Label:
          id:  label
          text:  'Select a spritesheet'
          canvas.before:
            Color:
              rgb:  .2, .3, .3
            Rectangle:
              pos:  self.pos
              size:  self.size

        Button:
          text:  'Select'
          background_color:  .4, .5, .5,  1
          on_release:  root.choice()
          size_hint_x:  .25


<TileScreen>:
  FloatLayout:
    canvas:
      Rectangle:
        texture:  app.tex
        pos:  self.pos
        size:  app.img.texture_size

    Button:
      text:  'Calibrate XY'
      background_normal:  'button12px.png'
      background_down:  'down12px.png'
      border:  12, 12, 12, 12

      on_press:  root.cross()
      on_release:  self.pos_hint = { 'x': 1,  'y': 1 }
      on_release:  ok.pos_hint  = { 'x': .9,  'y': .45 }

      on_release:  tilehgm.pos_hint  = { 'x': .7,  'y': .9 }
      on_release:  tilehgp.pos_hint  = { 'x': .7,  'y': .8 }
      on_release:  tilehup.pos_hint  = { 'x': .8, 'y': .9 }
      on_release:  tilehdn.pos_hint  = { 'x': .8, 'y': .8 }
      on_release:  tilehp.pos_hint  = { 'x': .9, 'y': .9 }
      on_release:  tilehm.pos_hint  = { 'x': .9, 'y': .8 }

      on_release:  tilevm.pos_hint  = { 'x': .8, 'y': .22 }
      on_release:  tilevp.pos_hint  = { 'x': .9, 'y': .22 }
      on_release:  tilevl.pos_hint  = { 'x': .8, 'y': .12 }
      on_release:  tilevr.pos_hint  = { 'x': .9, 'y': .12 }
      on_release:  tilevgm.pos_hint  = { 'x': .8, 'y': .02 }
      on_release:  tilevgp.pos_hint  = { 'x': .9, 'y': .02 }

      size_hint:  (.2, .2)
      pos_hint:  {'x': .4, 'y': .4}

    Button:
      id:  ok
      text:  'OK'
      background_color:  .0, .1, .2,  .9
      on_press:  root.ok()
      on_release:  self.pos_hint = { 'x': 1, 'y': 1 }
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }


##  Horizontal line

    Button:
      text:  'gap  -'
      id: tilehgm
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapy(1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  'gap  +'
      id: tilehgp
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapy(-1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }

    Button:
      text:  'Up'
      id: tilehup
      background_color:  .1, .5, .7,  .9
      on_release:  root.vert(1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  'Down'
      id: tilehdn
      background_color:  .1, .5, .7,  .9
      on_release:  root.vert(-1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }

    Button:
      text:  '+'
      id: tilehp
      background_color:  .1, .7, .9,  .9
      on_release:  root.vert(0, 1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  '-'
      id: tilehm
      background_color:  .1, .7, .9,  .9
      on_release:  root.vert(0, -1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }

##  Vertical line

    Button:
      text:  '-'
      id: tilevm
      background_color:  .1, .7, .9,  .9
      on_release:  root.horiz(0, -1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  '+'
      id: tilevp
      background_color:  .1, .7, .9,  .9
      on_release:  root.horiz(0, 1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }

    Button:
      text:  'Left'
      id: tilevl
      background_color:  .1, .5, .7,  .9
      on_release:  root.horiz(-1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  'Right'
      id: tilevr
      background_color:  .1, .5, .7,  .9
      on_release:  root.horiz(1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }

    Button:
      text:  'gap  -'
      id: tilevgm
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapx(-1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }
    Button:
      text:  'gap  +'
      id: tilevgp
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapx(1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1 }


<OkayScreen>:
  FloatLayout:
    canvas:
      Rectangle:
        texture:  app.tex
        pos:  self.pos
        size:  app.img.texture_size

    Button:
      id:  bgbutton
      pos:  self.pos
      size:  app.img.texture_size
      on_release:  root.toggle()
      on_release:  root.rename()
      background_color:  1, 1, 1,  0

    Button:
      text:  'Populate grid\n\nClick tiles you wish to hide'
      background_normal:  'button12px.png'
      background_down:  'down12px.png'
      border:  12, 12, 12, 12
      halign: 'center'

      on_press:  root.populate()
      on_release:  self.pos_hint = { 'x': 1,  'y': 1}
      on_release:  rename.pos_hint  = { 'x': .8, 'y': .45 }

      on_release:  okhgm.pos_hint  = { 'x': .9,  'y': .9 }
      on_release:  okhgp.pos_hint  = { 'x': .9,  'y': .8 }
      on_release:  okhup.pos_hint  = { 'x': .8,  'y': .9 }
      on_release:  okhdn.pos_hint  = { 'x': .8,  'y': .8 }
      on_release:  okhp.pos_hint  = { 'x': .7,  'y': .8 }
      on_release:  okhm.pos_hint  = { 'x': .7,  'y': .9 }

      on_release:  okvp.pos_hint  = { 'x': .8,  'y': .22 }
      on_release:  okvm.pos_hint  = { 'x': .9,  'y': .22 }
      on_release:  okvl.pos_hint  = { 'x': .8,  'y': .12 }
      on_release:  okvr.pos_hint  = { 'x': .9,  'y': .12 }
      on_release:  okvgm.pos_hint  = { 'x': .8,  'y': .02 }
      on_release:  okvgp.pos_hint  = { 'x': .9,  'y': .02 }

      size_hint:  (.2, .2)
      pos_hint:  {'x': .4, 'y': .4}


    Button:
      id:  rename
      halign: 'center'
      text:  'Name\nTiles'
      background_color:  .0, .9, .9,  .8
      on_press:  root.nametiles()
      on_release:  generate.pos_hint  = {'x': .9, 'y': .45}
      on_release:  rename.pos_hint  = { 'x': 1, 'y': 1 }

      on_release:  okhp.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okhm.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okhup.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okhdn.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okhgp.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okhgm.pos_hint  = { 'x': 1, 'y': 1 }

      on_release:  okvp.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okvm.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okvl.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okvr.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okvgp.pos_hint  = { 'x': 1, 'y': 1 }
      on_release:  okvgm.pos_hint  = { 'x': 1, 'y': 1 }

      size_hint:  ( .08,  .08 )
      pos_hint:  { 'x': 1,  'y': 1 }

    Button:
      id:  generate
      halign: 'center'
      text:  'Generate\nAtlas'
      background_color:  0, .9, .9,  .8
      on_press:  root.generate()
      size_hint:  ( .08,  .08 )
      pos_hint:  {'x': 1, 'y': 1 }

##  Horizontal line

    Button:
      text:  'gap  -'
      id:  okhm
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapy(-1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  'gap  +'
      id:  okhp
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapy(1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}


    Button:
      text:  'Up'
      id:  okhup
      background_color:  .1, .5, .7,  .9
      on_release:  root.vert(1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  'Down'
      id:  okhdn
      background_color:  .1, .5, .7,  .9
      on_release:  root.vert(-1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}


    Button:
      text:  '+'
      id:  okhgp
      background_color:  .1, .7, .9,  .9
      on_release:  root.vert(0, 1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  '-'
      id:  okhgm
      background_color:  .1, .7, .9,  .9
      on_release:  root.vert(0, -1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}

##  Vertical line

    Button:
      text:  '-'
      id:  okvm
      background_color:  .1, .7, .9,  .9
      on_release:  root.horiz(0, -1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  '+'
      id:  okvp
      background_color:  .1, .7, .9,  .9
      on_release:  root.horiz(0, 1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}


    Button:
      text:  'Left'
      id:  okvl
      background_color:  .1, .5, .7,  .9
      on_release:  root.horiz(-1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  'Right'
      id:  okvr
      background_color:  .1, .5, .7,  .9
      on_release:  root.horiz(1, 0)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}


    Button:
      text:  'gap  -'
      id:  okvgm
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapx(-1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
    Button:
      text:  'gap  +'
      id:  okvgp
      background_color:  .1, .7, .9,  .9
      on_release:  root.gapx(1)
      size_hint:  ( .05,  .04 )
      pos_hint:  { 'x': 1,  'y': 1}
